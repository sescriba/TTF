% Chapter 1

\chapter{Introducción general} % Main chapter title

\label{Chapter1} % For referencing the chapter elsewhere, use \ref{Chapter1} 
\label{IntroGeneral}

En este capítulo se introduce conceptos básicos de los sistemas de iluminación modernos y se presentan los objetivos y alcances de este proyecto.

%----------------------------------------------------------------------------------------

% Define some commands to keep the formatting separated from the content 
\newcommand{\keyword}[1]{\textbf{#1}}
\newcommand{\tabhead}[1]{\textbf{#1}}
\newcommand{\code}[1]{\texttt{#1}}
\newcommand{\file}[1]{\texttt{\bfseries#1}}
\newcommand{\option}[1]{\texttt{\itshape#1}}
\newcommand{\grados}{$^{\circ}$}

%----------------------------------------------------------------------------------------

%\section{Introducción}

%----------------------------------------------------------------------------------------
\section{Introducción a los sistemas de iluminación}

A partir de la llegada de los LEDs ({\it{Light Emissor Doide}}) de alta potencia al mercado de la electrónica, los sistemas de iluminación del hogar (y en general) experimentaron una verdadera revolución comercial y tecnológica. Los bajos costos y la posibilidad de control de los mismos generaron un sin fin innovador que sigue vigente hoy en día. En una casa tipo es común observar lámparas LED de colores brillantes capaces de ser controladas con un teléfono celular produciendo un efecto visual poco pensado algunas décadas en el pasado o, también, su capacidad de ser encendidas o apagadas con un simple "click programado". Sin embargo es aún un desafío para los ingenieros poder integrar estos sistemas de iluminación a la arquitectura edilicia y que los mismos sean eficientes, vistosos y de bajo costo.

\subsection{Iluminando una escalera moderna}

Uno de los mayores problemas de la iluminación de los hogares modernos es lograr un efecto lumínico vistoso sobre espacios asimétricos, con un número elevado de bordes irregulares donde las sombras juegan un desafío. Un claro ejemplo son las escaleras, donde los propios escalones proyectan sombras sobre sus predecesores o antecesores. La ingeniería en iluminación se encargar de calcular para estos casos la cantidad de lúmenes (es decir, la cantidad de luz producida por una fuente) que debe tener un cierto volumen del espacio considerando sus deformaciones y en sintonía con normas específicas. El Código Residencial Internacional recomienda 100 lúmenes por pie cuadrado (alrededor de 100 centímetros cuadrados) en sectores de interior con escaleras y cuya temperatura de color ronde entre 2700 y 3000 Kelvin.

Sin embargo, hay otro aspecto que estos códigos no contemplan del todo: la eficiencia energética. Este factor es fundamental a la hora de efectuar una obra lumínica en un hogar, ya que definirá la estrategia constructiva de la escalera.

\subsection{Eficiencia energética}

Tanto el acceso a la energía eléctrica como la cantidad de watts que se consuman en un sistema de iluminación van a generar consideraciones importantes a la hora de pensar un sistema lumínico para una escalera. Si se dispone de pocos accesos a la energía, la oportunidad de agregar puntos de luz al espacio estará completamente limitado, afectado la capacidad de cubrir el mismo con los niveles de lúmenes adecuados. Además, deben considerarse el consumo total sobre dicho acceso energético y que la infraestructura lo soporte. 

A pesar de estos inconvenientes, los avances tecnológicos han generado soluciones a partir de la invención de las tiras LED, cuyo consumo energético es alrededor de un 90\% menor a un sistema de iluminación tradicional. A grandes rasgos, estas tiras logran iluminar 100 lúmenes por vatio de energía, mientras que una bombilla incandescente ofrecen 20 lúmenes por vatio. Por otro lado, su desarrollo longitudinal permite transportar la electricidad desde un único punto de acceso energético hasta el fin del espacio a iluminar sin el adicional de cableado.


%----------------------------------------------------------------------------------------

\section{Motivación}

Si bien existen múltiples sistemas de iluminación para el hogar, las escaleras son aún un territorio poco explorado y con gran versatilidad a diseños. Además, los avances de la electrónica juegan un rol fundamental para que estos diseños sea innovadores, con capacidad de control sobre el qué y el cómo se desea iluminar por parte del usuario.

La amplia gama de sensores y actuadores de bajo costo, así como los sistemas de comunicación sin cableado, son la motivación para generar un nuevo módulo lumínico transformable que responda a las necesidades de un usuario particular. 


%----------------------------------------------------------------------------------------

\section{Objetivos y alcances}

Este trabajo de desarrollo pretende integrar los avances e innovaciones tecnológicas en la iluminación del hogar agregando valor a bajo costo y control por parte del usuario. Es así que, integrando los conocimientos adquiridos a lo largo de la Carrera de Especialidad en Sistemas Embebidos de la Universidad de Buenos Aires, se desarrolla el Firmware en lenguaje de programación C de un sistema embebido basado en tiras LED y controlado mediante sensores de proximidad que permita iluminar una escalera de una cantidad fija de escalones. También es parte de este proyecto la incorporación de un control mediante tecnología Bluetooth de la tonalidad de la luz, brillo y color, así como su encendido o apagado de acuerdo a la circulación del usuario por la escalera.

Por otro lado, no es parte de este trabajo el desarrollo de un Hardware integral, si no que se produce un prototipo funcional utilizando componentes de fabricantes comerciales. Tampoco es parte de este proyecto el desarrollo del código de una interfaz de usuario ni brindar soporte a la misma.

%----------------------------------------------------------------------------------------

\section{Estado del arte}

En esta sección se presentan algunos productos similares al aquí desarrollado disponibles en el mercado. Se realiza un pequeño análisis de las prestaciones y costos y se exponen las diferencias y similitudes con el propuesto en esta memoria.
 

\subsection{SuperlightingLED}

La empresa de tecnología LED SuperlightingLED ofrece en el mercado internacional un sistema de iluminación de escaleras con tecnología de tiras LEDs y sensores de movimientos (SCSSLKIT-12V-COB). De acuerdo a su pagina de ventas este producto consta de un microcontrolador ES32 y dos sensores de movimiento ubicados al extremo de la escalera donde se instala. Además cuenta con una fuente de alimentación de 12V y las tiras LED (de color y temperatura variables) para cubrir hasta 32 escalones de un ancho total de 1,2 metros cada uno las cuales debe estar cableadas a la central de controladora. Cuenta con dos versiones principales tanto para interior (IP20) como para exterior (IP67) y también puede o no incluir perfiles de aluminio para facilitar su instalación. En las figuras \ref{fig:spled1} y \ref{fig:spled2} se puede apreciar los componentes de este sistema que al día de la fecha tiene un costo de unos 160USD en su versión más económica y hasta 630USD en su versión premium. Para más información puede visitar la página web de \textit{SuperlightingLED}\footnote{\url{https://www.superlightingled.com}}.
\begin{figure}[h]
	\centering
	\includegraphics[width=\textwidth]{./Figures/superlightingLED.png}
	\caption{Sistema de SuperlightingLED y su conexión.}
	\label{fig:spled1}
\end{figure}

\begin{figure}[h]
	\centering
	\includegraphics[width=\textwidth]{./Figures/superlightingLED2.png}
	\caption{Componentes incluidos en el paquete básico.}
	\label{fig:spled2}
\end{figure}

\subsection{Configurando TexMaker}
\label{subsec:configurando}



Una vez instalado el programa y los paquetes adicionales se debe abrir el archivo memoria.tex con el editor para ver una pantalla similar a la que se puede apreciar en la figura \ref{fig:texmaker}. 
Una vez instalado el programa y los paquetes adicionales se debe abrir el archivo memoria.tex con el editor para ver una pantalla similar a la que se puede apreciar en la figura \ref{fig:texmaker}. 
Una vez instalado el programa y los paquetes adicionales se debe abrir el archivo memoria.tex con el editor para ver una pantalla similar a la que se puede apreciar en la figura \ref{fig:texmaker}. 
Una vez instalado el programa y los paquetes adicionales se debe abrir el archivo memoria.tex con el editor para ver una pantalla similar a la que se puede apreciar en la figura \ref{fig:texmaker}. 

\vspace{1cm}

\begin{figure}[htbp]
	\centering
	\includegraphics[width=.5\textwidth]{./Figures/texmaker.png}
	\caption{Entorno de trabajo de texMaker.}
	\label{fig:texmaker}
\end{figure}

\vspace{1cm}

Notar que existe una vista llamada Estructura a la izquierda de la interfaz que nos permite abrir desde dentro del programa los archivos individuales de los capítulos.  A la derecha se encuentra una vista con el archivo propiamente dicho para su edición. Hacia la parte inferior se encuentra una vista del log con información de los resultados de la compilación.  En esta última vista pueden aparecen advertencias o \textit{warning}, que normalmente pueden ser ignorados, y los errores que se indican en color rojo y deben resolverse para que se genere el PDF de salida.

Recordar que el archivo que se debe compilar con PDFLaTeX es \file{memoria.tex}, si se tratara de compilar alguno de los capítulos saldría un error.  Para salvar la molestia de tener que cambiar de archivo para compilar cada vez que se realice una modificación en un capítulo, se puede definir el archivo \file{memoria.tex} como ``documento maestro'' yendo al menú opciones -> ``definir documento actual como documento maestro'', lo que permite compilar con PDFLaTeX memoria.tex directamente desde cualquier archivo que se esté modificando . Se muestra esta opción en la figura \ref{fig:docMaestro}.

\begin{figure}[h]
	\centering
	\includegraphics[width=\textwidth]{./Figures/docMaestro.png}
	\caption{Definir memoria.tex como documento maestro.}
	\label{fig:docMaestro}
\end{figure}

En el menú herramientas se encuentran las opciones de compilación.  Para producir un archivo PDF a partir de un archivo .tex se debe ejecutar PDFLaTeX (el shortcut es F6). Para incorporar nueva bibliografía se debe utilizar la opción BibTeX del mismo menú herramientas (el shortcut es F11).

Notar que para actualizar las tablas de contenidos se debe ejecutar PDFLaTeX dos veces.  Esto se debe a que es necesario actualizar algunos archivos auxiliares antes de obtener el resultado final.  En forma similar, para actualizar las referencias bibliográficas se debe ejecutar primero PDFLaTeX, después BibTeX y finalmente PDFLaTeX dos veces por idénticos motivos.

\section{Personalizando la plantilla, el archivo \file{memoria.tex}}
\label{sec:FillingFile}

Para personalizar la plantilla se debe incorporar la información propia en los distintos archivos \file{.tex}. 

Primero abrir \file{memoria.tex} con TexMaker (o el editor de su preferencia). Se debe ubicar dentro del archivo el bloque de código titulado \emph{INFORMACIÓN DE LA PORTADA} donde se deben incorporar los primeros datos personales con los que se construirá automáticamente la portada.


%----------------------------------------------------------------------------------------

\section{El código del archivo \file{memoria.tex} explicado}

El archivo \file{memoria.tex} contiene la estructura del documento y es el archivo de mayor jerarquía de la memoria.  Podría ser equiparable a la función \emph{main()} de un programa en C, o mejor dicho al archivo fuente .c donde se encuentra definida la función main().

La estructura básica de cualquier documento de \LaTeX{} comienza con la definición de clase del documento, es seguida por un preámbulo donde se pueden agregar funcionalidades con el uso de \texttt{paquetes} (equiparables a bibliotecas de C), y finalmente, termina con el cuerpo del documento, donde irá el contenido de la memoria.

\lstset{%
  basicstyle=\small\ttfamily,
  language=[LaTeX]{TeX}
}

\begin{lstlisting}
\documentclass{article}  <- Definicion de clase
\usepackage{listings}	 <- Preambulo

\begin{document}	 <- Comienzo del contenido propio 
	Hello world!
\end{document}
\end{lstlisting}


El archivo \file{memoria.tex} se encuentra densamente comentado para explicar qué páginas, secciones y elementos de formato está creando el código \LaTeX{} en cada línea. El código está dividido en bloques con nombres en mayúsculas para que resulte evidente qué es lo que hace esa porción de código en particular. Inicialmente puede parecer que hay mucho código \LaTeX{}, pero es principalmente código para dar formato a la memoria por lo que no requiere intervención del usuario de la plantilla.  Sí se deben personalizar con su información los bloques indicados como:

\begin{itemize}
	\item Informacion de la memoria
	\item Resumen
	\item Agradecimientos
	\item Dedicatoria
\end{itemize}

El índice de contenidos, las listas de figura de tablas se generan en forma automática y no requieren intervención ni edición manual por parte del usuario de la plantilla. 

En la parte final del documento se encuentran los capítulos y los apéndices.  Por defecto se incluyen los 5 capítulos propuestos que se encuentran en la carpeta /Chapters. Cada capítulo se debe escribir en un archivo .tex separado y se debe poner en la carpeta \emph{Chapters} con el nombre \file{Chapter1}, \file{Chapter2}, etc\ldots El código para incluir capítulos desde archivos externos se muestra a continuación.

\begin{verbatim}
	\include{Chapters/Chapter1}
	\include{Chapters/Chapter2} 
	\include{Chapters/Chapter3}
	\include{Chapters/Chapter4} 
	\include{Chapters/Chapter5} 
\end{verbatim}

Los apéndices también deben escribirse en archivos .tex separados, que se deben ubicar dentro de la carpeta \emph{Appendices}. Los apéndices vienen comentados por defecto con el caracter \code{\%} y para incluirlos simplemente se debe eliminar dicho caracter.

Finalmente, se encuentra el código para incluir la bibliografía en el documento final.  Este código tampoco debe modificarse. La metodología para trabajar las referencias bibliográficas se desarrolla en la sección \ref{sec:biblio}.
%----------------------------------------------------------------------------------------

\section{Bibliografía}
\label{sec:biblio}

Las opciones de formato de la bibliografía se controlan a través del paquete de latex \option{biblatex} que se incluye en la memoria en el archivo memoria.tex.  Estas opciones determinan cómo se generan las citas bibliográficas en el cuerpo del documento y cómo se genera la bibliografía al final de la memoria.

En el preámbulo se puede encontrar el código que incluye el paquete biblatex, que no requiere ninguna modificación del usuario de la plantilla, y que contiene las siguientes opciones:

\begin{lstlisting}
\usepackage[backend=bibtex,
	natbib=true, 
	style=numeric, 
	sorting=none]
{biblatex}
\end{lstlisting}

En el archivo \file{reference.bib} se encuentran las referencias bibliográficas que se pueden citar en el documento.  Para incorporar una nueva cita al documento lo primero es agregarla en este archivo con todos los campos necesario.  Todas las entradas bibliográficas comienzan con $@$ y una palabra que define el formato de la entrada.  Para cada formato existen campos obligatorios que deben completarse. No importa el orden en que las entradas estén definidas en el archivo .bib.  Tampoco es importante el orden en que estén definidos los campos de una entrada bibliográfica. A continuación se muestran algunos ejemplos:

\begin{lstlisting}
@ARTICLE{ARTICLE:1,
    AUTHOR="John Doe",
    TITLE="Title",
    JOURNAL="Journal",
    YEAR="2017",
}
\end{lstlisting}


\begin{lstlisting}
@BOOK{BOOK:1,
    AUTHOR="John Doe",
    TITLE="The Book without Title",
    PUBLISHER="Dummy Publisher",
    YEAR="2100",
}
\end{lstlisting}


\begin{lstlisting}
@INBOOK{BOOK:2,
    AUTHOR="John Doe",
    TITLE="The Book without Title",
    PUBLISHER="Dummy Publisher",
    YEAR="2100",
    PAGES="100-200",
}
\end{lstlisting}


\begin{lstlisting}
@MISC{WEBSITE:1,
    HOWPUBLISHED = "\url{http://example.com}",
    AUTHOR = "Intel",
    TITLE = "Example Website",
    MONTH = "12",
    YEAR = "1988",
    URLDATE = {2012-11-26}
}
\end{lstlisting}

Se debe notar que los nombres \emph{ARTICLE:1}, \emph{BOOK:1}, \emph{BOOK:2} y \emph{WEBSITE:1} son nombres de fantasía que le sirve al autor del documento para identificar la entrada. En este sentido, se podrían reemplazar por cualquier otro nombre.  Tampoco es necesario poner : seguido de un número, en los ejemplos sólo se incluye como un posible estilo para identificar las entradas.

La entradas se citan en el documento con el comando: 

\begin{verbatim}
\citep{nombre_de_la_entrada}
\end{verbatim}

Y cuando se usan, se muestran así: \citep{ARTICLE:1}, \citep{BOOK:1}, \citep{BOOK:2}, \citep{WEBSITE:1}.  Notar cómo se conforma la sección Bibliografía al final del documento.

Finalmente y como se mencionó en la subsección \ref{subsec:configurando}, para actualizar las referencias bibliográficas tanto en la sección bibliografía como las citas en el cuerpo del documento, se deben ejecutar las herramientas de compilación PDFLaTeX, BibTeX, PDFLaTeX, PDFLaTeX, en ese orden.  Este procedimiento debería resolver cualquier mensaje "Citation xxxxx on page x undefined".
